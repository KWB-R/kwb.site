##############################################################################
### Autogenerated with R package kwb.pkgbuild v0.1.1
### (installed from 'Github (kwb-r/kwb.pkgbuild@0ac3694)' source code on 2019-09-09)
### by calling the function kwb.pkgbuild::use_gitlab_ci_pkgdown()
### (file created at: 2019-10-18 00:22:32)
##############################################################################


### Modified from template from https://bookdown.org/yihui/blogdown/gitlab-pages.html
### https://raw.githubusercontent.com/rstudio/blogdown/88a05670a52c4f512c6ac9fbad0242a4d7ccde15/docs/03-deploy.Rmd

image: debian:buster-slim

before_script:
  # Uncomment en_US.UTF-8 for inclusion in generation
  # make the environment de_DE.UTF-8 configured or parsing of German projects not working
  - apt-get install -y language-pack-de
  - export LANG=de_DE.utf8
  - export LC_ALL=de_DE.utf8
  - export LC_CTYPE=de_DE.utf8
  - apt-get update && apt-get -y install pandoc r-base r-cran-rodbc
  - apt-get -y install libcurl4-openssl-dev libxml2-dev libssl-dev
  - apt-get -y install libv8-dev libudunits2-dev libmagick++-dev

  - R -e "install.packages(c('pkgdown','remotes'), repos='http://cran.rstudio.com')"
  - R -e "remotes::install_github('KWB-R/kwb.pkgbuild', dependencies = TRUE, upgrade = 'always')"
  - R -e "remotes::install_github('KWB-R/kwb.site', dependencies = TRUE, upgrade = 'always')"

pages:
  script:
    - R -e 'kwb.pkgbuild::deploy_site_github_with_extra_files(vignettes_file_pattern_to_copy = "\\.json$|\\.html$")'
    - mv docs public
  artifacts:
    paths:
      - public
  only:
  - master
